/*!
 * name: @feizheng/next-node-fetch
 * description: A wrapper for `node-fetch`.
 * url: https://github.com/afeiship/next-node-fetch
 * version: 1.2.2
 * date: 2020-01-06 20:53:48
 * license: MIT
 */
!function(){var e=e||this||window||Function("return this")(),d=e.nx||require("@feizheng/next-js-core2"),c=require("@feizheng/next-data-transform"),p=require("@feizheng/next-content-type"),l=require("@feizheng/next-deep-assign"),g=require("@feizheng/next-param"),y=require("@feizheng/next-delay"),x={dataType:"json",delay:0,fetch:require("node-fetch"),responseType:"json"},n=d.declare("nx.NodeFetch",{properties:{config:{set:function(e){this._config=d.mix(null,x,e)},get:function(){return this._config}}},statics:{request:function(e,n,t,r){function i(e){return o.responseType?e[o.responseType]():e}var o=d.mix(null,x,this.config,r),u="get"===n,s=u?null:c[o.dataType](t),f=u?e+"?"+g(t):e,h={"Content-Type":p(o.dataType)},a=l({method:n,body:s,headers:h},o);return o.delay?o.fetch(f,a).then(y(o.delay)).then(i):o.fetch(f,a).then(i)},"get,delete,head,post,put,patch":function(r){return function(e,n,t){return this.request(e,r,n,t)}}}});"undefined"!=typeof module&&module.exports&&(module.exports=n)}();